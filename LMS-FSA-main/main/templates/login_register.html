{% extends 'base.html' %}

{% block title %}Login{% endblock %}

{% block content %}
<div class="container mt-4">
    {% if page == 'login' %}
        <h2>Login</h2>
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-danger">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <form method="POST" action="">
            {% csrf_token %}
            <label>Username:</label>
            <input type='text' name='username' placeholder="Enter Username" required/>

            <label>Password:</label>
            <input type='password' name='password' placeholder="Enter Password" required/>

            <button type="submit" class="btn btn-primary">Login</button>
        </form>
        
        <p>Haven't signed up yet?</p>
        <a href="{% url 'main:register' %}">Sign up</a>
    {% else %}
        <h2>Register</h2>
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-danger">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <form method="POST" action="{% url 'main:register' %}"> <!-- Correct the action URL -->
            {% csrf_token %}
            <label>Username:</label>
            <input type='text' name='username' placeholder="Enter Username" required/>

            <label>Password:</label>
            <input type='password' name='password' placeholder="Enter Password" required/>

            <label>Email:</label>
            <input type='email' name='email' placeholder="Enter Email" required/>

            <button type="submit" class="btn btn-primary">Register</button>
        </form>
        
        <p>Already signed up?</p>
        <a href="{% url 'main:login' %}">Login</a> 
    {% endif %}
</div>
{% endblock %}